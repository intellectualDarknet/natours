{"mappings":"AAEO,MAAMA,EAAY,CAACC,EAAMC,KAE9BC,IAEA,MAAMC,EAAS,2BAA2BH,MAASC,UACnDG,SAASC,cAAc,QAAQC,mBAAmB,aAAcH,GAGhEI,OAAOC,WAAWN,EAAW,MAGlBA,EAAY,KACvB,MAAMO,EAAKL,SAASC,cAAc,UAE9BI,GAAIA,EAAGC,cAAcC,YAAYF,EAAA,ECd1BG,EAAQC,MAAOC,EAAOC,KACjC,IAcwB,mBATNC,MAAM,CACtBC,OAAQ,OACRC,IAAK,2CACLC,KAAM,C,MACJL,E,SACAC,MAIII,KAAKC,SACXrB,EAAU,UAAW,2BACrBQ,OAAOC,YAAW,KAChBa,SAASC,OAAO,OACf,MACJ,CACD,MAAMC,GACJxB,EAAU,QAASwB,EAAIC,SAASL,KAAKM,QACvC,GCxBFC,QAAQC,IAAI,8BAEL,MAAMC,EAAaC,IAExBC,SAASC,YAAc,6FAEzB,IAAIC,EAAM,IAAIF,SAASG,IAAI,CAGzBC,UAAW,MACXC,MAAO,qCAKPC,YAAY,IAId,MAAMC,EAAS,IAAIP,SAASQ,aAE5BT,EAAUU,SAAQC,IAEhB,MAAM/B,EAAKL,SAASqC,cAAc,OAClChC,EAAGiC,UAAY,SAGf,IAAIZ,SAASa,OAAO,CAClBC,QAASnC,EAGToC,OAAQ,WAIPC,UAAUN,EAAIO,aACdC,MAAMhB,GAGT,IAAIF,SAASmB,MAAM,CAEjBC,OAAQ,KAEPJ,UAAUN,EAAIO,aAEdI,QAAQ,UAAUX,EAAIY,QAAQZ,EAAIa,mBAClCL,MAAMhB,GAGTK,EAAOiB,OAAOd,EAAIO,YAAW,IAI/Bf,EAAIuB,UAAUlB,EAAQ,CACpBmB,QAAS,CACPC,IAAK,IACLC,OAAQ,IACRC,KAAM,IACNC,MAAO,MAEX,ECzDMC,EAASzD,SAAS0D,eAAe,OACjCC,EAAY3D,SAASC,cAAc,SACnC2D,EAAY5D,SAASC,cAAc,oBAEzC,GAAIwD,EAAQ,CAGVjC,EAFkBqC,KAAKC,MAAML,EAAOM,QAAQtC,YAI5CzB,SAASC,cAAc,SAAS+D,iBAAiB,UAAWC,IAC1DA,EAAEC,iBAEF1D,EAAME,MAAOC,SAAA,GAGjB,CAEIgD,GACFA,EAAUK,iBAAiB,UAAUC,IACnCA,EAAEC,iBACF,MAAMC,EAAQnE,SAAS0D,eAAe,SAASU,MACzCC,EAAWrE,SAAS0D,eAAe,YAAYU,MACrD5D,EAAM2D,EAAOE,EAAA,IAKbT,GAAqBI,iBAAiB,SFHpBvD,UAEpB,WACoBG,MAAM,CACtBC,OAAQ,MACRC,IAAK,8CAICC,KAAKC,OAAS,UAAWC,SAASqD,QAAO,EACnD,CACA,MAAMnD,GACJxB,EAAU,QAAS,gCACrB","sources":["public/js/alerts.js","public/js/login.js","public/js/mapbox.js","public/js/index.js"],"sourcesContent":["\r\n// type success or error\r\nexport const showAlert = (type, msg) => {\r\n  // just to make sure\r\n  hideAlert()\r\n\r\n  const markUp = `<div class=\"alert alert-${type}\">${msg}<div/>`\r\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markUp)\r\n\r\n  // hide alert\r\n  window.setTimeout(hideAlert, 5000)\r\n}\r\n\r\nexport const hideAlert = () => {\r\n  const el = document.querySelector('.alert')\r\n  // красиво !\r\n  if (el) el.parentElement.removeChild(el)\r\n}","import { showAlert } from './alerts.js'\r\n\r\nexport const login = async (email, password) => {\r\n  try {\r\n    // we can send information from here or directly from the form\r\n      // axious returns promise so to cathc it use await\r\n  // only modern browsers can use async await so be aware of that\r\n  // if there is an error axious will throw error\r\n  const res = await axios({\r\n    method: 'POST',\r\n    url: 'http://localhost:5000/api/v1/users/login',\r\n    data: {\r\n      email,\r\n      password\r\n    }\r\n  })\r\n\r\n  if (res.data.status === 'success') {\r\n    showAlert('success', 'Logged in successfully!')\r\n    window.setTimeout(() => {\r\n      location.assign('/')\r\n    }, 1500)\r\n  }} \r\n  catch(err) {\r\n    showAlert('error', err.response.data.message)\r\n  }\r\n}\r\n\r\nexport const logout = async () => {\r\n    // try catch block if we lose internet connection\r\n  try {\r\n    const res = await axios({\r\n      method: 'GET',\r\n      url: 'http://localhost:5000/api/v1/users/login',\r\n    })\r\n    // we are logged out but we see the same structire (conditional rendering)\r\n    // reload\r\n    if (res.data.status = 'success') location.reload(true)\r\n  }\r\n  catch(err) {\r\n    showAlert('error', 'Error logging out!. Try again')\r\n  }\r\n}\r\n","// to integrate on the client side\r\nconsole.log('hello from the client side')\r\n\r\nexport const displayMap = locations => {\r\n// access token for mapbox\r\n  mapboxgl.accessToken = 'pk.eyJ1IjoiZGVhbXN0YXIiLCJhIjoiY2xlOHFla2RpMGN2ejNubHJwaDRrNWdvOSJ9.K6TeUGIPnXkZZpHgrdQYRw';\r\n\r\nvar map = new mapboxgl.Map({\r\n  // container here has map value so \r\n  // so this map will be connected to div id='map'\r\n  container: 'map',\r\n  style: 'mapbox://styles/mapbox/streets-v11',\r\n  // we can define the center of the map \r\n  // center: [-118.1, 34],\r\n  // zoom: 10,\r\n  // remove zoom\r\n  scrollZoom: false\r\n  // interactive: false\r\n})\r\n// the area that will be showed\r\nconst bounds = new mapboxgl.LngLatBounds();\r\n\r\nlocations.forEach(loc => {\r\n  // Create marker\r\n  const el = document.createElement('div');\r\n  el.className = 'marker'\r\n\r\n  // add marker\r\n  new mapboxgl.Marker({\r\n    element: el,\r\n    // bottom of the pin will be located in exact GPS location\r\n    // possibly center\r\n    anchor: 'bottom'\r\n    // setLngLat setting coordinates to marker\r\n    // attack marker to map\r\n  })\r\n    .setLngLat(loc.coordinates)\r\n    .addTo(map)\r\n  \r\n  // Add popup\r\n  new mapboxgl.Popup({\r\n    // will leave writing upper on 30px on image\r\n    offset: 30\r\n  })\r\n    .setLngLat(loc.coordinates)\r\n    // add html mark \r\n    .setHTML(`<p>Day ${loc.day}: ${loc.description}</p>`)\r\n    .addTo(map)\r\n\r\n  //Extend bounds to include current location\r\n  bounds.extend(loc.coordinates)\r\n})\r\n\r\n// apply bounds to the map\r\nmap.fitBounds(bounds, {\r\n  padding: {\r\n    top: 200,\r\n    bottom: 150,\r\n    left: 100,\r\n    right: 100\r\n  }\r\n});\r\n}\r\n","// to polifill some features of js don't know if its actual or not\r\nimport { login, logout } from './login.js'\r\nimport { displayMap } from './mapbox.js'\r\n\r\nconst mapBox = document.getElementById('map')\r\nconst loginForm = document.querySelector('.form')\r\nconst logOutBtn = document.querySelector('.nav__el__logout')\r\n\r\nif (mapBox) {\r\n  const locations = JSON.parse(mapBox.dataset.locations)\r\n// separate responsibilities!\r\n  displayMap(locations)\r\n\r\n  document.querySelector('.form').addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n\r\n    login(email, password)\r\n\r\n  })\r\n}\r\n\r\nif (loginForm) {\r\n  loginForm.addEventListener('submit', e => {\r\n    e.preventDefault()\r\n    const email = document.getElementById('email').value\r\n    const password = document.getElementById('password').value\r\n    login(email, password)\r\n  })\r\n\r\n}\r\n\r\nif (logOutBtn) logOutBtn,addEventListener('click', logout)"],"names":["$7dc87b7f457e655a$export$de026b00723010c1","type","msg","$7dc87b7f457e655a$export$516836c6a9dfc573","markUp","document","querySelector","insertAdjacentHTML","window","setTimeout","el","parentElement","removeChild","$bf5b431e6a69fea8$export$596d806903d1f59e","async","email","password","axios","method","url","data","status","location","assign","err","response","message","console","log","$3c4e158d14605c12$export$4c5dd147b21b9176","locations","mapboxgl","accessToken","map","Map","container","style","scrollZoom","bounds","LngLatBounds","forEach","loc","createElement","className","Marker","element","anchor","setLngLat","coordinates","addTo","Popup","offset","setHTML","day","description","extend","fitBounds","padding","top","bottom","left","right","$407eccdc61ba7a94$var$mapBox","getElementById","$407eccdc61ba7a94$var$loginForm","$407eccdc61ba7a94$var$logOutBtn","JSON","parse","dataset","addEventListener","e","preventDefault","email1","value","password1","reload"],"version":3,"file":"index.js.map","sourceRoot":"../../../"}